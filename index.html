<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>나의 국회 데이터 보드</title>
    <style>
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f4f4f4; }
        tr:nth-child(even) { background-color: #f9f9f9; }
    </style>
</head>
<body>
    <h1>제22대 국회의원 명단</h1>
    <div id="content">데이터를 불러오는 중입니다...</div>

    <script>
        const apiKey = '82fd6d7e707b49108a3b217a84a1b479';
        // 국회의원 인적사항 API 주소
        const url = `https://open.assembly.go.kr/portal/openapi/nktulghcadyhmiqxi?KEY=${apiKey}&Type=json&pIndex=1&pSize=20`;

        fetch(url)
            .then(response => response.json())
            .then(data => {
                const rows = data.nktulghcadyhmiqxi[1].row;
                let html = '<table><tr><th>성명</th><th>정당</th><th>당선대수</th><th>상세정보</th></tr>';
                rows.forEach(item => {
                    // UNITS 대신 UNIT_NM을 사용하여 '제22대' 등이 출력되도록 수정
                    html += `<tr>
                                <td><b>${item.HG_NM}</b></td>
                                <td>${item.POLY_NM}</td>
                                <td>${item.UNIT_NM}</td>
                                <td>${item.REELE_GBN_NM}</td>
                             </tr>`;
                });
                html += '</table>';
                document.getElementById('content').innerHTML = html;
            })
            .catch(error => {
                document.getElementById('content').innerHTML = '데이터를 불러오는 데 실패했습니다.';
                console.error(error);
            });
    </script>
</body>
</html>